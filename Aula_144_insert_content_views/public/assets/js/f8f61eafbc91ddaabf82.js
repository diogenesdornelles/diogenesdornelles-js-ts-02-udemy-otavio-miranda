require("dotenv").config();var express=require("express"),routes=require("./routes"),path=require("path"),app=express(),mongoose=require("mongoose");mongoose.connect(process.env.CONNSTRING).then((function(){app.emit("ready")})).catch((function(e){console.error(e)}));var _require=require("./src/middlewares/middleware"),middlewareGlobal=_require.middlewareGlobal,viewsFullPath=path.resolve(__dirname,"src","views"),staticsFullPath=path.resolve(__dirname,"public");app.set("views",viewsFullPath),app.set("view engine","ejs"),app.use(express.urlencoded({extended:!0})),app.use(middlewareGlobal),app.use(routes),app.use(express.static(staticsFullPath)),app.on("ready",(function(){app.listen(3e3,(function(){console.log("Access http://localhost:3000"),console.log("Listening...")}))}));